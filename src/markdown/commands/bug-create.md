# bug创建命令

初始化新的bug修复工作流，用于跟踪和解决bug。

## 使用方式
```
/bug-create <bug名称> [描述]
```

## 工作流概览

这是**简化版bug修复工作流** —— 为处理bug和问题而设计的轻量级替代方案，无需完整规范工作流的开销。

### bug修复阶段
1. **报告阶段**（本命令）—— 记录bug
2. **分析阶段**（`/bug-analyze`）—— 调查根本原因
3. **修复阶段**（`/bug-fix`）—— 实施解决方案
4. **验证阶段**（`/bug-verify`）—— 确认修复结果

## 操作说明

您正在协助创建一个新的bug修复工作流。本流程适用于无需完整规范流程开销的小型修复。

1. **创建目录结构**
   - 创建目录 `bugs/{bugName}/`
   - 初始化 report.md、analysis.md 和 verification.md 文件

2. **一次性加载全部上下文（分层上下文加载）**  
   在bug创建工作开始时，一次性加载完整上下文：

   ```bash
   # 加载调控文档（如存在）
   claude-code-spec-workflow get-steering-context

   # 加载bug模板
   claude-code-spec-workflow get-template-context bug
   ```

3. **收集bug信息**
   - 接收bug名称和可选描述
   - 引导用户完成bug报告创建
   - 使用结构化格式确保一致性

4. **生成bug报告**
   - **遵循模板**：使用上方预加载上下文中的bug报告模板（请勿重新加载）
   - 按照bug报告模板结构，创建详细bug描述

## 模板使用要求
- **严格遵循结构**：精确使用已加载的bug报告模板
- **包含所有章节**：不得遗漏任何必需模板章节
- **结构化格式**：遵循模板格式，确保一致性

5. **请求用户输入**
   - 若描述中未提供详细信息，请向用户询问
   - 引导用户逐项填写bug报告各章节
   - 确保捕获所有必需信息

6. **保存并继续**
   - 将完成的bug报告保存至 report.md
   - 询问：“此bug报告是否准确？如无问题，我们将进入分析阶段。”
   - 等待用户明确批准后再继续

## 与规范工作流的关键区别

- **更快速**：无需求/设计阶段
- **更聚焦**：专注于修复现有功能
- **更精简**：4个阶段，而非详细工作流
- **更实用**：从问题直接导向解决方案

## 规则

- 一次仅创建一个bug修复流程
- bug名称必须使用 kebab-case 格式（如 my-bug-name）
- 调查阶段必须分析现有代码库
- 必须遵循项目现有模式与规范
- 各阶段之间未经用户批准不得继续

## 错误处理

工作流执行中如遇问题：
- **bug描述不清**：提出针对性问题以澄清
- **过于复杂**：建议拆分为多个小bug或改用规范工作流
- **无法复现**：记录阻碍点并建议替代方案

## 示例
```
/bug-create login-timeout "用户被登出过快"
```

## 下一步
bug报告获得批准后，请进入 `/bug-analyze` 阶段。